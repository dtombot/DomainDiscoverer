---
import BaseLayout from './BaseLayout.astro';
// Support both direct props (Astro 2/3 style) and nested frontmatter (some MD adapters)
const p: any = Astro.props || {};
const fm: any = p.frontmatter || {};
const title: string = p.title ?? fm.title ?? 'Untitled';
const description: string | undefined = p.description ?? fm.description;
const pubDate: string | undefined = p.pubDate ?? fm.pubDate;
const updatedDate: string | undefined = p.updatedDate ?? fm.updatedDate ?? pubDate;
---
<BaseLayout title={title} description={description}>
  <header class="bg-gradient-to-r from-primary to-secondary/70">
    <div class="container-pad py-12 sm:py-14">
      <nav aria-label="Breadcrumb" class="text-sm text-white/80 mb-2">
        <ol class="flex gap-2 items-center">
          <li><a href="/" class="hover:underline">Home</a></li>
          <li>/</li>
          <li><a href="/blog" class="hover:underline">Blog</a></li>
          <li>/</li>
          <li aria-current="page" class="text-white">{title}</li>
        </ol>
      </nav>
      <h1 class="text-3xl sm:text-5xl font-extrabold text-white leading-tight drop-shadow">{title}</h1>
      {(pubDate || updatedDate) && (
        <div class="text-white/70 text-sm mt-2">
          {pubDate && (<span>Published: {new Date(pubDate).toLocaleDateString()}</span>)}
          {pubDate && updatedDate && <span class="mx-2">Â·</span>}
          {updatedDate && (<span>Updated: {new Date(updatedDate).toLocaleDateString()}</span>)}
        </div>
      )}
    </div>
  </header>

  <article class="container-pad my-10">
    <div class="prose">
      <slot />
    </div>
    <!-- Related posts -->
    <section class="mt-12">
      <div class="rounded-3xl p-1 bg-gradient-to-r from-secondary/40 to-primary/40">
        <div class="rounded-3xl p-5 bg-white/80 backdrop-blur-sm border border-slate-200">
          <h2 class="font-extrabold text-xl mb-4">Related Posts</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <a href="/blog/best-domain-name-tools-for-beginners" class="group rounded-2xl border border-slate-200 bg-white/90 p-4 hover:shadow-lg transition relative overflow-hidden">
              <div class="absolute inset-x-0 -top-10 h-20 bg-gradient-to-r from-secondary/20 to-primary/20 opacity-0 group-hover:opacity-100 transition"></div>
              <div class="font-bold">Best Domain Name Tools for Beginners</div>
              <div class="text-slate-700 text-sm mt-1">Build a reliable toolkit without overspending.</div>
              <span class="mt-3 inline-flex items-center gap-1 text-secondary text-sm">Read more <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor' class='w-4 h-4'><path d='M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3Z'/></svg></span>
            </a>
            <a href="/blog/top-domaining-tools-for-investors-2025" class="group rounded-2xl border border-slate-200 bg-white/90 p-4 hover:shadow-lg transition relative overflow-hidden">
              <div class="absolute inset-x-0 -top-10 h-20 bg-gradient-to-r from-secondary/20 to-primary/20 opacity-0 group-hover:opacity-100 transition"></div>
              <div class="font-bold">Top Domaining Tools for Investors</div>
              <div class="text-slate-700 text-sm mt-1">Expired, brandable, and SEO-ready picks.</div>
              <span class="mt-3 inline-flex items-center gap-1 text-secondary text-sm">Read more <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor' class='w-4 h-4'><path d='M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3Z'/></svg></span>
            </a>
            <a href="/blog/cheap-domain-registrars-with-free-whois" class="group rounded-2xl border border-slate-200 bg-white/90 p-4 hover:shadow-lg transition relative overflow-hidden">
              <div class="absolute inset-x-0 -top-10 h-20 bg-gradient-to-r from-secondary/20 to-primary/20 opacity-0 group-hover:opacity-100 transition"></div>
              <div class="font-bold">Cheap Registrars with Free WHOIS Privacy</div>
              <div class="text-slate-700 text-sm mt-1">Protect your info and control renewals.</div>
              <span class="mt-3 inline-flex items-center gap-1 text-secondary text-sm">Read more <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor' class='w-4 h-4'><path d='M14 3h7v7h-2V6.41l-9.29 9.3-1.42-1.42 9.3-9.29H14V3Z'/></svg></span>
            </a>
          </div>
        </div>
      </div>
    </section>
  </article>
</BaseLayout>

<!-- Article structured data -->
<script type="application/ld+json" set:html={JSON.stringify({
  '@context': 'https://schema.org', '@type': 'Article',
  headline: title, description: description,
  datePublished: pubDate || undefined,
  dateModified: updatedDate || pubDate || undefined,
  mainEntityOfPage: { '@type': 'WebPage', '@id': `https://domaindiscoverer.com${Astro.url.pathname}` },
  publisher: { '@type': 'Organization', name: 'Domain Discoverer', url: 'https://domaindiscoverer.com' }
})}></script>
